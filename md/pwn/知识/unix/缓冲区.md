---
title: 缓冲区
updated: 2021-11-11T19:45:43.0000000+08:00
created: 2021-11-01T23:01:34.0000000+08:00
---

# setbuf(stdin, 0);
# setvbuf(stdout, 0, 2, 0);
stdio.h

int setvbuf(FILE \*stream, char \*buffer, int mode, size_t size)

- **buffer**-- 这是分配给用户的缓冲。如果设置为 NULL，该函数会自动分配一个指定大小的缓冲。
- mode
| \_IOFBF | **全缓冲**：对于输出，数据在缓冲填满时被一次性写入。对于输入，缓冲会在请求输入且缓冲为空时被填充。                                                 |
|---------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| \_IOLBF | **行缓冲**：对于输出，数据在遇到换行符或者在缓冲填满时被写入，具体视情况而定。对于输入，缓冲会在请求输入且缓冲为空时被填充，直到遇到下一个换行符。 |
| \_IONBF | **无缓冲**：不使用缓冲。每个 I/O 操作都被即时写入。buffer 和 size 参数被忽略。                                                                     |

**返回值**

如果成功，则该函数返回 0，否则返回非零值。

*来自 \<<https://www.runoob.com/cprogramming/c-function-setvbuf.html>\>*

